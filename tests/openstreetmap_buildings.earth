<!--
osgEarth Sample - Openstreetmap buildings.

This shows how to use the TFS driver to connect to a worldwide openstreetmap building dataset.
You must have the mapnik vector tiles driver built by including the protobuf libraries in cmake.
-->
<map name="TFS" type="geocentric" version="2">

    <options>
        <terrain driver="rex"/>
    </options>

    <feature_source name="buildings-data" driver="tfs">
        <url>http://readymap.org/osm-buildings/</url>
        <min_level>14</min_level>
        <max_level>14</max_level>
        <profile>spherical-mercator</profile>
        <format>pbf</format>
        <filters>
            <script>
              <![CDATA[ ("building" in feature.properties); ]]>
            </script>
        </filters>
    </feature_source>

    <feature_model name="buildings" feature_source="buildings-data">
        <styles>
            <library name="us_resources">
                <url>../data/resources/textures_us/catalog.xml</url>
            </library>

            <style type="text/css">
                default {
                    fill:  #ff0000;
                    render-depth-offset-min-bias: 1000;
                }
            </style>

        </styles>
    </feature_model>

    <image name="osm_mapnik" driver="xyz">
        <url>http://[abc].tile.openstreetmap.org/{z}/{x}/{y}.png</url>
        <profile>spherical-mercator</profile>
        <cache_policy usage="none"/>
    </image>

    <elevation name="readymap_elevation" driver="tms">
        <url>http://readymap.org/readymap/tiles/1.0.0/116/</url>
        <vdatum>egm96</vdatum>
    </elevation>

    <xi:include href="viewpoints.xml"/>

</map>
