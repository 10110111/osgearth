<!--
|  Procedural terrain splatting.
|  Run with splat.bat, (or splat-edit.bat for tweakery)
-->

<map>
        
    <options>
        <terrain driver="rex" 
                 tile_size="17"
                 high_resolution_first="true" 
                 merges_per_frame="25"
                 skirt_ratio="0"
                 normal_maps="true" />
    </options>
    
    <elevation name="readymap_elevation" driver="tms" enabled="true">
        <url>http://readymap.org/readymap/tiles/1.0.0/116/</url>
    </elevation>
     
    <image name="CLASSMAP" driver="landuse" shared="true" visible="false" coverage="true" max_data_level="13">
        <base_lod>12</base_lod>
        <tile_size>256</tile_size>
        <cache_policy usage="none"/>
        <images>
            <image name="ESA" driver="gdal" coverage="true">
                <url>H:/data/esa/GLOBCOVER_L4_200901_200912_V2.3_Ant_tiled.tif</url>
                <warp>0.01</warp>
            </image>
        </images>
        <shared_sampler> landUseTex       </shared_sampler>
        <shared_matrix>  landUseTexMatrix </shared_matrix>
    </image>

    <extensions>   

        <bumpmap>
            <image>../data/rock_hard.jpg</image>
            <octaves>8</octaves>
            <intensity>1.2</intensity>
        </bumpmap>

        <!-- required by the splat extension for now -->
        <noise/>
   
        <splat>
        
            <coverage>
                <layer> CLASSMAP </layer>
                <legend> ../data/splat/GLOBCOVER_legend.xml </legend>
            </coverage>
            
            <surface>
                <catalog> ../data/splat/splat_catalog.xml </catalog>
            </surface>

            <land_cover>
            
                <library name="flora" url="../data/resouces/textures_us/flora/flora.xml"/>
                
                <layers>
                    <layer name="trees" lod="14" max_distance="6400" density="2.0">   
                        <biomes>
                            <biome classes="forest forest1 forest2 forest3 forest4 forest5">
                                <billboard url="../data/splat/pine.png" width="15.0" height="20.0"/>
                            </biome>
                            <biome classes="forest4">
                                <billboard url="../data/splat/cypress.png" width="10.0" height="13"/>
                            </biome>
                        </biomes>
                    </layer>
                
                    <layer name="grass" lod="19" max_distance="200" density="3.0" wind="0.15">
                        <biomes>
                            <biome name="Grass" classes="grassland grassland2 forest forest2 forest3 forest4 forest5">
                                <billboard url="../data/splat/grass1.png" width="0.6" height="0.35"/>
                            </biome>
                        </biomes>
                    </layer>
                </layers>
                
            </land_cover>
            
        </splat>
            
        <xi:include href="viewpoints.xml"/>
        
    </extensions>

</map>
